# æŸ¥çœ‹å¸®åŠ©

å…³é”®å‚æ•°è§£è¯»

-c <æ–‡ä»¶è·¯å¾„æˆ–URL>: è¿™æ˜¯æœ€é‡è¦çš„å‚æ•°ï¼Œç”¨æ¥æŒ‡å®šä½ çš„ Clash é…ç½®æ–‡ä»¶æˆ–è®¢é˜…é“¾æ¥ã€‚ä½ å¯ä»¥ä¼ å…¥æœ¬åœ°æ–‡ä»¶çš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ª HTTP(S) è®¢é˜…åœ°å€ã€‚

-f <æ­£åˆ™è¡¨è¾¾å¼>: ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¿‡æ»¤èŠ‚ç‚¹ã€‚æ¯”å¦‚ï¼Œ-f 'HK|æ¸¯' ä¼šåªæµ‹è¯•èŠ‚ç‚¹åç§°ä¸­åŒ…å«â€œHKâ€æˆ–â€œæ¸¯â€çš„èŠ‚ç‚¹ã€‚

-output <æ–‡ä»¶è·¯å¾„>: æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„è·¯å¾„ã€‚æµ‹é€Ÿå’Œç­›é€‰å®Œæˆåï¼Œå·¥å…·ä¼šç”Ÿæˆä¸€ä¸ªåªåŒ…å«åˆæ ¼èŠ‚ç‚¹çš„æ–°é…ç½®æ–‡ä»¶ã€‚

-rename: è¿™ä¸ªå‚æ•°ä¼šè‡ªåŠ¨æ ¹æ®èŠ‚ç‚¹çš„ IP åœ°ç†ä½ç½®å’Œæµ‹é€Ÿç»“æœæ¥é‡å‘½åèŠ‚ç‚¹ã€‚

-fast: å¯ç”¨å¿«é€Ÿæ¨¡å¼ã€‚æ­¤æ¨¡å¼ä¸‹ï¼Œå·¥å…·åªæµ‹è¯•èŠ‚ç‚¹å»¶è¿Ÿï¼Œè·³è¿‡å¸¦å®½æµ‹è¯•ï¼Œè¿™å¯¹äºå¿«é€Ÿæ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å¯ç”¨éå¸¸æœ‰ç”¨ã€‚

æ€§èƒ½ç­›é€‰å‚æ•°
è¿™äº›å‚æ•°å¯ä»¥å¸®åŠ©ä½ ç­›é€‰å‡ºç¬¦åˆç‰¹å®šæ€§èƒ½è¦æ±‚çš„èŠ‚ç‚¹ï¼š

-max-latency <æ—¶é—´>: è¿‡æ»¤æ‰å»¶è¿Ÿè¶…è¿‡è¯¥å€¼çš„èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œ-max-latency 800ms ä¼šæ’é™¤å»¶è¿Ÿé«˜äº 800 æ¯«ç§’çš„èŠ‚ç‚¹ã€‚

-min-download-speed <é€Ÿåº¦>: è¿‡æ»¤æ‰ä¸‹è½½é€Ÿåº¦ä½äºè¯¥å€¼çš„èŠ‚ç‚¹ã€‚è¿™é‡Œçš„é€Ÿåº¦å•ä½æ˜¯ MB/sã€‚ä¾‹å¦‚ï¼Œ-min-download-speed 5 ä¼šæ’é™¤ä¸‹è½½é€Ÿåº¦ä½äº 5 MB/s çš„èŠ‚ç‚¹ã€‚

-min-upload-speed <é€Ÿåº¦>: è¿‡æ»¤æ‰ä¸Šä¼ é€Ÿåº¦ä½äºè¯¥å€¼çš„èŠ‚ç‚¹ã€‚è¿™é‡Œçš„é€Ÿåº¦å•ä½ä¹Ÿæ˜¯ MB/sã€‚

æµ‹é€ŸåŸç†
clash-speedtest çš„æµ‹é€ŸåŸºäºä¸¤ä¸ªæ ¸å¿ƒæŒ‡æ ‡ï¼š

å¸¦å®½ï¼šæŒ‡ä¸‹è½½æŒ‡å®šæ–‡ä»¶ï¼ˆé»˜è®¤ 50MBï¼‰çš„é€Ÿåº¦ï¼Œåæ˜ èŠ‚ç‚¹çš„å‡ºå£å¸¦å®½ã€‚

å»¶è¿Ÿï¼šæŒ‡è¯·æ±‚å‘å‡ºåˆ°æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚çš„å“åº”æ—¶é—´ï¼ˆTTFBï¼‰ï¼Œåæ˜ ä½ åˆ°èŠ‚ç‚¹çš„è¿æ¥é€Ÿåº¦ã€‚

æ–‡æ¡£ç‰¹åˆ«å¼ºè°ƒï¼Œå¸¦å®½å’Œå»¶è¿Ÿæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„æŒ‡æ ‡ï¼Œé«˜å¸¦å®½ä¸ç­‰äºä½å»¶è¿Ÿï¼Œåä¹‹äº¦ç„¶ã€‚



> clash-speedtest -h
Usage of clash-speedtest:
  -c string
        configuration file path, also support http(s) url
  -f string
        filter proxies by name, use regexp (default ".*")
  -b string
        block proxies by keywords, use | to separate multiple keywords (example: -b 'rate|x1|1x')
  -server-url string
        server url for testing proxies (default "https://speed.cloudflare.com")
  -download-size int
        download size for testing proxies (default 50MB)
  -upload-size int
        upload size for testing proxies (default 20MB)
  -timeout duration
        timeout for testing proxies (default 5s)
  -concurrent int
        download concurrent size (default 4)
  -output string
        output config file path (default "")
  -stash-compatible
        enable stash compatible mode
  -max-latency duration
        filter latency greater than this value (default 800ms)
  -min-download-speed float
        filter speed less than this value(unit: MB/s) (default 5)
  -min-upload-speed float
        filter upload speed less than this value(unit: MB/s) (default 2)
  -rename
        rename nodes with IP location and speed
  -fast
        enable fast mode, only test latency

# æ¼”ç¤ºï¼š

# 1. æµ‹è¯•å…¨éƒ¨èŠ‚ç‚¹ï¼Œä½¿ç”¨ HTTP è®¢é˜…åœ°å€
# è¯·åœ¨è®¢é˜…åœ°å€åé¢å¸¦ä¸Š flag=meta å‚æ•°ï¼Œå¦åˆ™æ— æ³•è¯†åˆ«å‡ºèŠ‚ç‚¹ç±»å‹
> clash-speedtest -c 'https://domain.com/api/v1/client/subscribe?token=secret&flag=meta'

# 2. æµ‹è¯•é¦™æ¸¯èŠ‚ç‚¹ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤ï¼Œä½¿ç”¨æœ¬åœ°æ–‡ä»¶
> clash-speedtest -c ~/.config/clash/config.yaml -f 'HK|æ¸¯'
èŠ‚ç‚¹                                        	å¸¦å®½          	å»¶è¿Ÿ
Premium|å¹¿æ¸¯|IEPL|01                        	484.80KB/s  	815.00ms
Premium|å¹¿æ¸¯|IEPL|02                        	N/A         	N/A
Premium|å¹¿æ¸¯|IEPL|03                        	2.62MB/s    	333.00ms
Premium|å¹¿æ¸¯|IEPL|04                        	1.46MB/s    	272.00ms
Premium|å¹¿æ¸¯|IEPL|05                        	3.87MB/s    	249.00ms

# 3. å½“ç„¶ä½ ä¹Ÿå¯ä»¥æ··åˆä½¿ç”¨
> clash-speedtest -c "https://domain.com/api/v1/client/subscribe?token=secret&flag=meta,/home/.config/clash/config.yaml"

# 4. ç­›é€‰å‡ºå»¶è¿Ÿä½äº 800ms ä¸”ä¸‹è½½é€Ÿåº¦å¤§äº 5MB/s çš„èŠ‚ç‚¹ï¼Œå¹¶è¾“å‡ºåˆ° filtered.yaml
> clash-speedtest -c "https://domain.com/api/v1/client/subscribe?token=secret&flag=meta" -output filtered.yaml -max-latency 800ms -min-speed 5
# ç­›é€‰åçš„é…ç½®æ–‡ä»¶å¯ä»¥ç›´æ¥ç²˜è´´åˆ° Clash/Mihomo ä¸­ä½¿ç”¨ï¼Œæˆ–æ˜¯è´´åˆ° Github\Gist ä¸Šé€šè¿‡ Proxy Provider å¼•ç”¨ã€‚

# 5. ä½¿ç”¨ -rename é€‰é¡¹æŒ‰ç…§ IP åœ°åŒºå’Œä¸‹è½½é€Ÿåº¦é‡å‘½åèŠ‚ç‚¹
> clash-speedtest -c config.yaml -output result.yaml -rename
# é‡å‘½ååçš„èŠ‚ç‚¹åç§°æ ¼å¼ï¼šğŸ‡ºğŸ‡¸ US | â¬‡ï¸ 15.67 MB/s
# åŒ…å«å›½æ—— emojiã€å›½å®¶ä»£ç å’Œä¸‹è½½é€Ÿåº¦

# 6. å¿«é€Ÿæµ‹è¯•æ¨¡å¼
> clash-speedtest -f 'HK' -fast -c ~/.config/clash/config.yaml
# æ­¤å‘½ä»¤å°†åªæµ‹è¯•èŠ‚ç‚¹å»¶è¿Ÿï¼Œè·³è¿‡å…¶ä»–æµ‹è¯•é¡¹ç›®ï¼Œé€‚ç”¨äºï¼š
# - å¿«é€Ÿæ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å¯ç”¨
# - åªéœ€è¦æ£€æŸ¥å»¶è¿Ÿçš„åœºæ™¯
# - éœ€è¦å¿«é€Ÿå¾—åˆ°æµ‹è¯•ç»“æœçš„åœºæ™¯
ğŸ‡­ğŸ‡° é¦™æ¸¯ HK-10 100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| (20/20, 13 it/min)
åºå·    èŠ‚ç‚¹åç§°                ç±»å‹            å»¶è¿Ÿ
1.      ğŸ‡­ğŸ‡° é¦™æ¸¯ HK-01           Trojan          657ms
2.      ğŸ‡­ğŸ‡° é¦™æ¸¯ HK-20           Trojan          649ms
3.      ğŸ‡­ğŸ‡° é¦™æ¸¯ HK-15           Trojan          674ms
4.      ğŸ‡­ğŸ‡° é¦™æ¸¯ HK-19           Trojan          649ms
5.      ğŸ‡­ğŸ‡° é¦™æ¸¯ HK-12           Trojan          667ms


æµ‹é€Ÿæ–‡ä»¶åˆ—è¡¨
ASH æµ‹é€Ÿæ–‡ä»¶
http://ash.icmp.hetzner.com/100MB.bin
http://ash.icmp.hetzner.com/1GB.bin
http://ash.icmp.hetzner.com/10GB.bin
http://ash.icmp.hetzner.com/
HEL1 æµ‹é€Ÿæ–‡ä»¶
http://hel.icmp.hetzner.com/100MB.bin
http://hel.icmp.hetzner.com/1GB.bin
http://hel.icmp.hetzner.com/10GB.bin
http://hel.icmp.hetzner.com/
FSN1 æµ‹é€Ÿæ–‡ä»¶
http://fsn.icmp.hetzner.com/100MB.bin
http://fsn.icmp.hetzner.com/1GB.bin
http://fsn.icmp.hetzner.com/10GB.bin
http://fsn.icmp.hetzner.com/
NBG1 æµ‹é€Ÿæ–‡ä»¶
https://speed.hetzner.de/100MB.bin
https://speed.hetzner.de/1GB.bin
https://speed.hetzner.de/10GB.bin
https://speed.hetzner.de/

100MBï¼šhttps://speed.cloudflare.com/__down?bytes=104857600
200MBï¼šhttps://speed.cloudflare.com/__down?bytes=209715200

-download-size å‚æ•°åªæ¥å—æ•´æ•°ä½œä¸ºè¾“å…¥ï¼Œå•ä½æ˜¯å­—èŠ‚ï¼ˆbytesï¼‰ã€‚50MB è¿™æ ·çš„å­—ç¬¦ä¸²æ ¼å¼æ˜¯æ— æ•ˆçš„ã€‚

ä» clash-speedtest çš„å¸®åŠ©ä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°ï¼Œ-download-size çš„é»˜è®¤å€¼æ˜¯ 52428800ï¼Œè¿™æ­£å¥½æ˜¯ 50MB çš„å­—èŠ‚æ•°ã€‚

-server-url "https://mmatechnical.com/Download/Download-Test-File/(MMA)-100MB.zip" \
-download-size 52428800 \
https://1100mb.com/files
https://mmatechnical.com/download-test-files/
